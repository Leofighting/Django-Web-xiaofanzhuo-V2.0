function Banner(){}Banner.prototype.listenAddBannerEvent=function(){var n=this;$("#add-banner-btn").click(function(){6<=$(".banner-list-group").children().length?window.messageBox.showInfo("最多只能添加 6 张轮播图"):n.createBannerItem()})},Banner.prototype.addImageSelectEvent=function(n){var a=n.find(".thumbnail"),e=n.find(".image-input");a.click(function(){e.click()}),e.change(function(){var n=this.files[0],e=new FormData;e.append("file",n),xfzajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(n){if(200===n.code){var e=n.data.url;a.attr("src",e)}}})})},Banner.prototype.addRemoveBannerEvent=function(e){e.find(".close-btn").click(function(){var n=e.attr("data-banner-id");n?xfzalert.alertConfirm({text:"您确定要删除此轮播图？",confirmCallback:function(){xfzajax.post({url:"/cms/delete_banner/",data:{banner_id:n},success:function(n){200===n.code&&(e.remove(),window.messageBox.showSuccess("轮播图删除成功~"))}})}}):e.remove()})},Banner.prototype.addSaveBannerEvent=function(t){var n=t.find(".save-btn"),r=t.find(".thumbnail"),i=t.find("input[name='priority']"),o=t.find("input[name='link_to']"),c=t.find("span[class='priority']"),d=t.attr("data-banner-id"),s="";s=d?"/cms/edit_banner/":"/cms/add_banner/",n.click(function(){var n=r.attr("src"),e=i.val(),a=o.val();xfzajax.post({url:s,data:{image_url:n,priority:e,link_to:a,pk:d},success:function(n){200===n.code&&(d?window.messageBox.showSuccess("轮播图修改成功~"):(d=n.data.banner_id,t.attr("data-banner-id",d),window.messageBox.showSuccess("轮播图添加成功~")),c.text("优先级："+e))}})})},Banner.prototype.loadData=function(){var r=this;xfzajax.get({url:"/cms/banner_list/",success:function(n){if(200===n.code)for(var e=n.data,a=0;a<e.length;a++){var t=e[a];r.createBannerItem(t)}}})},Banner.prototype.createBannerItem=function(n){var e=this,a=template("banner-item",{banner:n}),t=$(".banner-list-group"),r=null;r=n?(t.append(a),t.find(".banner-item:last")):(t.prepend(a),t.find(".banner-item:first")),e.addImageSelectEvent(r),e.addRemoveBannerEvent(r),e.addSaveBannerEvent(r)},Banner.prototype.run=function(){this.listenAddBannerEvent(),this.loadData()},$(function(){(new Banner).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhbm5lci5qcyJdLCJuYW1lcyI6WyJCYW5uZXIiLCJwcm90b3R5cGUiLCJsaXN0ZW5BZGRCYW5uZXJFdmVudCIsInNlbGYiLCJ0aGlzIiwiJCIsImNsaWNrIiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJ3aW5kb3ciLCJtZXNzYWdlQm94Iiwic2hvd0luZm8iLCJjcmVhdGVCYW5uZXJJdGVtIiwiYWRkSW1hZ2VTZWxlY3RFdmVudCIsImJhbm5lckl0ZW0iLCJpbWFnZSIsImZpbmQiLCJpbWFnZUlucHV0IiwiY2hhbmdlIiwiZmlsZSIsImZpbGVzIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsInhmemFqYXgiLCJwb3N0IiwidXJsIiwiZGF0YSIsInByb2Nlc3NEYXRhIiwiY29udGVudFR5cGUiLCJzdWNjZXNzIiwicmVzdWx0IiwiYXR0ciIsImFkZFJlbW92ZUJhbm5lckV2ZW50IiwiYmFubmVySWQiLCJ4ZnphbGVydCIsImFsZXJ0Q29uZmlybSIsInRleHQiLCJjb25maXJtQ2FsbGJhY2siLCJiYW5uZXJfaWQiLCJyZW1vdmUiLCJzaG93U3VjY2VzcyIsImFkZFNhdmVCYW5uZXJFdmVudCIsInNhdmVCdG4iLCJpbWFnZVRhZyIsInByaW9yaXR5VGFnIiwibGlua3RvVGFnIiwicHJpb3JpdHlTcGFuIiwiaW1hZ2VfdXJsIiwicHJpb3JpdHkiLCJ2YWwiLCJsaW5rX3RvIiwicGsiLCJsb2FkRGF0YSIsImdldCIsImJhbm5lcnMiLCJpIiwiYmFubmVyIiwidHBsIiwidGVtcGxhdGUiLCJiYW5uZXJMaXN0R3JvdXAiLCJwcmVwZW5kIiwicnVuIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxVQUlUQSxPQUFPQyxVQUFVQyxxQkFBdUIsV0FDcEMsSUFBSUMsRUFBT0MsS0FDRUMsRUFBRSxtQkFDUkMsTUFBTSxXQUdLLEdBRlFELEVBQUUsc0JBQ0tFLFdBQVdDLE9BRXBDQyxPQUFPQyxXQUFXQyxTQUFTLGlCQUcvQlIsRUFBS1Msc0JBSWJaLE9BQU9DLFVB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RCxFQUFFLFlBQ2UsSUFBSUwsUUFDVjhEIiwiZmlsZSI6ImJhbm5lci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBCYW5uZXIoKSB7XHJcblxyXG59XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlbkFkZEJhbm5lckV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGFkZEJ0biA9ICQoXCIjYWRkLWJhbm5lci1idG5cIik7XHJcbiAgICBhZGRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBiYW5uZXJMaXN0R3JvdXAgPSAkKFwiLmJhbm5lci1saXN0LWdyb3VwXCIpO1xyXG4gICAgICAgIHZhciBsZW5ndGggPSBiYW5uZXJMaXN0R3JvdXAuY2hpbGRyZW4oKS5sZW5ndGg7XHJcbiAgICAgICAgaWYgKGxlbmd0aCA+PSA2KSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dJbmZvKFwi5pyA5aSa5Y+q6IO95re75YqgIDYg5byg6L2u5pKt5Zu+XCIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuY3JlYXRlQmFubmVySXRlbSgpO1xyXG4gICAgfSlcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUuYWRkSW1hZ2VTZWxlY3RFdmVudCA9IGZ1bmN0aW9uIChiYW5uZXJJdGVtKSB7XHJcbiAgICB2YXIgaW1hZ2UgPSBiYW5uZXJJdGVtLmZpbmQoXCIudGh1bWJuYWlsXCIpO1xyXG4gICAgdmFyIGltYWdlSW5wdXQgPSBiYW5uZXJJdGVtLmZpbmQoXCIuaW1hZ2UtaW5wdXRcIik7XHJcblxyXG4gICAgaW1hZ2UuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGltYWdlSW5wdXQuY2xpY2soKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGltYWdlSW5wdXQuY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZmlsZSA9IHRoaXMuZmlsZXNbMF07XHJcbiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiZmlsZVwiLCBmaWxlKTtcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICBcInVybFwiOiBcIi9jbXMvdXBsb2FkX2ZpbGUvXCIsXHJcbiAgICAgICAgICAgIFwiZGF0YVwiOiBmb3JtRGF0YSxcclxuICAgICAgICAgICAgXCJwcm9jZXNzRGF0YVwiOiBmYWxzZSxcclxuICAgICAgICAgICAgXCJjb250ZW50VHlwZVwiOiBmYWxzZSxcclxuICAgICAgICAgICAgXCJzdWNjZXNzXCI6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbXCJjb2RlXCJdID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gcmVzdWx0W1wiZGF0YVwiXVtcInVybFwiXTtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZS5hdHRyKFwic3JjXCIsIHVybCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG5cclxuICAgIH0pXHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmFkZFJlbW92ZUJhbm5lckV2ZW50ID0gZnVuY3Rpb24gKGJhbm5lckl0ZW0pIHtcclxuICAgIHZhciBjbG9zZUJ0biA9IGJhbm5lckl0ZW0uZmluZChcIi5jbG9zZS1idG5cIik7XHJcbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGJhbm5lcklkID0gYmFubmVySXRlbS5hdHRyKFwiZGF0YS1iYW5uZXItaWRcIik7XHJcbiAgICAgICAgaWYgKGJhbm5lcklkKSB7XHJcbiAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0Q29uZmlybSh7XHJcbiAgICAgICAgICAgICAgICBcInRleHRcIjogXCLmgqjnoa7lrpropoHliKDpmaTmraTova7mkq3lm77vvJ9cIixcclxuICAgICAgICAgICAgICAgIFwiY29uZmlybUNhbGxiYWNrXCI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInVybFwiOiBcIi9jbXMvZGVsZXRlX2Jhbm5lci9cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJkYXRhXCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYmFubmVyX2lkXCI6IGJhbm5lcklkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3VjY2Vzc1wiOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0W1wiY29kZVwiXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySXRlbS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2VzcyhcIui9ruaSreWbvuWIoOmZpOaIkOWKn35cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBiYW5uZXJJdGVtLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmFkZFNhdmVCYW5uZXJFdmVudCA9IGZ1bmN0aW9uIChiYW5uZXJJdGVtKSB7XHJcbiAgICB2YXIgc2F2ZUJ0biA9IGJhbm5lckl0ZW0uZmluZChcIi5zYXZlLWJ0blwiKTtcclxuICAgIHZhciBpbWFnZVRhZyA9IGJhbm5lckl0ZW0uZmluZChcIi50aHVtYm5haWxcIik7XHJcbiAgICB2YXIgcHJpb3JpdHlUYWcgPSBiYW5uZXJJdGVtLmZpbmQoXCJpbnB1dFtuYW1lPSdwcmlvcml0eSddXCIpO1xyXG4gICAgdmFyIGxpbmt0b1RhZyA9IGJhbm5lckl0ZW0uZmluZChcImlucHV0W25hbWU9J2xpbmtfdG8nXVwiKTtcclxuICAgIHZhciBwcmlvcml0eVNwYW4gPSBiYW5uZXJJdGVtLmZpbmQoXCJzcGFuW2NsYXNzPSdwcmlvcml0eSddXCIpO1xyXG4gICAgdmFyIGJhbm5lcklkID0gYmFubmVySXRlbS5hdHRyKFwiZGF0YS1iYW5uZXItaWRcIik7XHJcbiAgICB2YXIgdXJsID0gXCJcIjtcclxuICAgIGlmIChiYW5uZXJJZCkge1xyXG4gICAgICAgIHVybCA9IFwiL2Ntcy9lZGl0X2Jhbm5lci9cIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdXJsID0gXCIvY21zL2FkZF9iYW5uZXIvXCJcclxuICAgIH1cclxuICAgIHNhdmVCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpbWFnZV91cmwgPSBpbWFnZVRhZy5hdHRyKFwic3JjXCIpO1xyXG4gICAgICAgIHZhciBwcmlvcml0eSA9IHByaW9yaXR5VGFnLnZhbCgpO1xyXG4gICAgICAgIHZhciBsaW5rX3RvID0gbGlua3RvVGFnLnZhbCgpO1xyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgIFwidXJsXCI6IHVybCxcclxuICAgICAgICAgICAgXCJkYXRhXCI6IHtcclxuICAgICAgICAgICAgICAgIFwiaW1hZ2VfdXJsXCI6IGltYWdlX3VybCxcclxuICAgICAgICAgICAgICAgIFwicHJpb3JpdHlcIjogcHJpb3JpdHksXHJcbiAgICAgICAgICAgICAgICBcImxpbmtfdG9cIjogbGlua190byxcclxuICAgICAgICAgICAgICAgIFwicGtcIjogYmFubmVySWRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCJzdWNjZXNzXCI6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbXCJjb2RlXCJdID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYmFubmVySWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoXCLova7mkq3lm77kv67mlLnmiJDlip9+XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbm5lcklkID0gcmVzdWx0W1wiZGF0YVwiXVtcImJhbm5lcl9pZFwiXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySXRlbS5hdHRyKFwiZGF0YS1iYW5uZXItaWRcIiwgYmFubmVySWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2VzcyhcIui9ruaSreWbvua3u+WKoOaIkOWKn35cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHByaW9yaXR5U3Bhbi50ZXh0KFwi5LyY5YWI57qn77yaXCIgKyBwcmlvcml0eSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICB9KVxyXG5cclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubG9hZERhdGEgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgXCJ1cmxcIjogXCIvY21zL2Jhbm5lcl9saXN0L1wiLFxyXG4gICAgICAgIFwic3VjY2Vzc1wiOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHRbXCJjb2RlXCJdID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBiYW5uZXJzID0gcmVzdWx0W1wiZGF0YVwiXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYmFubmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiYW5uZXIgPSBiYW5uZXJzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY3JlYXRlQmFubmVySXRlbShiYW5uZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmNyZWF0ZUJhbm5lckl0ZW0gPSBmdW5jdGlvbiAoYmFubmVyKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgdHBsID0gdGVtcGxhdGUoXCJiYW5uZXItaXRlbVwiLCB7XCJiYW5uZXJcIjogYmFubmVyfSk7XHJcbiAgICB2YXIgYmFubmVyTGlzdEdyb3VwID0gJChcIi5iYW5uZXItbGlzdC1ncm91cFwiKTtcclxuICAgIHZhciBiYW5uZXJJdGVtID0gbnVsbDtcclxuICAgIGlmIChiYW5uZXIpIHtcclxuICAgICAgICBiYW5uZXJMaXN0R3JvdXAuYXBwZW5kKHRwbCk7XHJcbiAgICAgICAgYmFubmVySXRlbSA9IGJhbm5lckxpc3RHcm91cC5maW5kKFwiLmJhbm5lci1pdGVtOmxhc3RcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJhbm5lckxpc3RHcm91cC5wcmVwZW5kKHRwbCk7XHJcblxyXG4gICAgICAgIGJhbm5lckl0ZW0gPSBiYW5uZXJMaXN0R3JvdXAuZmluZChcIi5iYW5uZXItaXRlbTpmaXJzdFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBzZWxmLmFkZEltYWdlU2VsZWN0RXZlbnQoYmFubmVySXRlbSk7XHJcbiAgICBzZWxmLmFkZFJlbW92ZUJhbm5lckV2ZW50KGJhbm5lckl0ZW0pO1xyXG4gICAgc2VsZi5hZGRTYXZlQmFubmVyRXZlbnQoYmFubmVySXRlbSk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubGlzdGVuQWRkQmFubmVyRXZlbnQoKTtcclxuICAgIHNlbGYubG9hZERhdGEoKTtcclxufTtcclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGJhbm5lciA9IG5ldyBCYW5uZXIoKTtcclxuICAgIGJhbm5lci5ydW4oKTtcclxufSk7Il19
