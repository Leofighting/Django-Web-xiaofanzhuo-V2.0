function FrontBase(){}function Auth(){var n=this;n.maskWrapper=$(".mask-wrapper"),n.scrollWrapper=$(".scroll-wrapper"),n.signinGroup=$(".signin-group"),n.signupGroup=$(".signup-group"),n.smsCaptcha=$(".sms-captcha-btn")}FrontBase.prototype.listenAuthBoxHover=function(){var n=$(".auth-box"),t=$(".user-more-box");n.hover(function(){t.show()},function(){t.hide()})},FrontBase.prototype.run=function(){this.listenAuthBoxHover()},$(function(){(new FrontBase).run()}),Auth.prototype.showEvent=function(){this.maskWrapper.show()},Auth.prototype.hideEvent=function(){this.maskWrapper.hide()},Auth.prototype.listenShowHideEvent=function(){var n=this,t=$(".signin-btn"),e=$(".signup-btn"),s=$(".close-btn");t.click(function(){n.showEvent(),n.scrollWrapper.css({left:0})}),e.click(function(){n.showEvent(),n.scrollWrapper.css({left:-400})}),s.click(function(){n.hideEvent()})},Auth.prototype.listenSwitchEvent=function(){var t=this;$(".switch").click(function(){var n=t.scrollWrapper.css("left");(n=parseInt(n))<0?t.scrollWrapper.animate({left:"0"},500):t.scrollWrapper.animate({left:"-400px"},500)})},Auth.prototype.listenSigninEvent=function(){var s=this,i=s.signinGroup.find("input[name='telephone']"),a=s.signinGroup.find("input[name='password']"),o=s.signinGroup.find("input[name='remember']");s.signinGroup.find(".submit-btn").click(function(){var n=i.val(),t=a.val(),e=o.prop("checked");xfzajax.post({url:"/account/login/",data:{telephone:n,password:t,remember:e?1:0},success:function(n){s.hideEvent(),window.location.reload()}})})},Auth.prototype.listenImgCaptchaEvent=function(){var n=$(".img_captcha");n.click(function(){n.attr("src","/account/img_captcha/?random="+Math.random())})},Auth.prototype.smsSuccessEvent=function(){var n=this;messageBox.showSuccess("短信验证码发送成功~"),n.smsCaptcha.addClass("disabled");var t=60;n.smsCaptcha.unbind("click");var e=setInterval(function(){n.smsCaptcha.text(t+"s"),--t<=0&&(clearInterval(e),n.smsCaptcha.removeClass("disabled"),n.smsCaptcha.text("发送验证码"),n.listenSmsCaptchaEvent())},1e3)},Auth.prototype.listenSmsCaptchaEvent=function(){var t=this,e=t.signupGroup.find("input[name='telephone']");t.smsCaptcha.click(function(){var n=e.val();n||messageBox.showInfo("请输入手机号码~"),xfzajax.get({url:"/account/sms_captcha/",data:{telephone:n},success:function(n){200===n.code&&t.smsSuccessEvent()}})})},Auth.prototype.listenSignupEvent=function(){var v=this;v.signupGroup.find(".submit-btn").click(function(n){n.preventDefault();var t=v.signupGroup.find("input[name='telephone']"),e=v.signupGroup.find("input[name='username']"),s=v.signupGroup.find("input[name='img_captcha']"),i=v.signupGroup.find("input[name='password1']"),a=v.signupGroup.find("input[name='password2']"),o=v.signupGroup.find("input[name='sms_captcha']"),p=t.val(),c=e.val(),r=s.val(),u=i.val(),l=a.val(),h=o.val();xfzajax.post({url:"/account/register/",data:{telephone:p,username:c,img_captcha:r,password1:u,password2:l,sms_captcha:h},success:function(n){window.location.reload()}})})},Auth.prototype.run=function(){var n=this;n.listenShowHideEvent(),n.listenSwitchEvent(),n.listenSigninEvent(),n.listenImgCaptchaEvent(),n.listenSmsCaptchaEvent(),n.listenSignupEvent()},$(function(){(new Auth).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyb250X2Jhc2UuanMiXSwibmFtZXMiOlsiRnJvbnRCYXNlIiwiQXV0aCIsInNlbGYiLCJ0aGlzIiwibWFza1dyYXBwZXIiLCIkIiwic2Nyb2xsV3JhcHBlciIsInNpZ25pbkdyb3VwIiwic2lnbnVwR3JvdXAiLCJzbXNDYXB0Y2hhIiwicHJvdG90eXBlIiwibGlzdGVuQXV0aEJveEhvdmVyIiwiYXV0aEJveCIsInVzZXJNb3JlQm94IiwiaG92ZXIiLCJzaG93IiwiaGlkZSIsInJ1biIsInNob3dFdmVudCIsImhpZGVFdmVudCIsImxpc3RlblNob3dIaWRlRXZlbnQiLCJzaWduaW5CdG4iLCJzaWdudXBCdG4iLCJjbG9zZUJ0biIsImNsaWNrIiwiY3NzIiwibGVmdCIsImxpc3RlblN3aXRjaEV2ZW50IiwiY3VycmVudExlZnQiLCJwYXJzZUludCIsImFuaW1hdGUiLCJsaXN0ZW5TaWduaW5FdmVudCIsInRlbGVwaG9uZUlucHV0IiwiZmluZCIsInBhc3N3b3JkSW5wdXQiLCJyZW1lbWJlcklucHV0IiwidGVsZXBob25lIiwidmFsIiwicGFzc3dvcmQiLCJyZW1lbWJlciIsInByb3AiLCJ4ZnphamF4IiwicG9zdCIsInVybCIsImRhdGEiLCJzdWNjZXNzIiwicmVzdWx0Iiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJsaXN0ZW5JbWdDYXB0Y2hhRXZlbnQiLCJpbWdDYXB0Y2hhIiwiYXR0ciIsIk1hdGgiLCJyYW5kb20iLCJzbXNTdWNjZXNzRXZlbnQiLCJtZXNzYWdlQm94Iiwic2hvd1N1Y2Nlc3MiLCJhZGRDbGFzcyIsImNvdW50IiwidW5iaW5kIiwidGltZXIiLCJzZXRJbnRlcnZhbCIsInRleHQiLCJjbGVhckludGVydmFsIiwicmVtb3ZlQ2xhc3MiLCJsaXN0ZW5TbXNDYXB0Y2hhRXZlbnQiLCJzaG93SW5mbyIsImdldCIsImxpc3RlblNpZ251cEV2ZW50IiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInVzZXJuYW1lSW5wdXQiLCJpbWdDYXB0Y2hhSW5wdXQiLCJwYXNzd29yZDFJbnB1dCIsInBhc3N3b3JkMklucHV0Iiwic21zQ2FwdGNoYUlucHV0IiwidXNlcm5hbWUiLCJpbWdfY2FwdGNoYSIsInBhc3N3b3JkMSIsInBhc3N3b3JkMiIsInNtc19jYXB0Y2hhIl0sIm1hcHBpbmdzIjoiQUFDQSxTQUFTQSxhQTJCVCxTQUFTQyxPQUNMLElBQUlDLEVBQU9DLEtBQ1hELEVBQUtFLFlBQWNDLEVBQUUsaUJBQ3JCSCxFQUFLSSxjQUFnQkQsRUFBRSxtQkFDdkJILEVBQUtLLFlBQWNGLEVBQUUsaUJBQ3JCSCxFQUFLTSxZQUFjSCxFQUFFLGlCQUNyQkgsRUFBS08sV0FBYUosRUFBRSxvQkE3QnhCTCxVQUFVVSxVQUFVQyxtQkFBcUIsV0FDckMsSUFBSUMsRUFBVVAsRUFBRSxhQUNaUSxFQUFjUixFQUFFLGtCQUNwQk8sRUFBUUUsTUFBTSxXQUNWRCxFQUFZRSxRQUNiLFdBQ0NGLEVBQVlHLFVBSXBCaEIsVUFBVVUsVUFBVU8sSUFBTSxXQUNYZCxLQUNOUSxzQkFJVE4sRUFBRSxZQUNrQixJQUFJTCxXQUNWaUIsUUFjZGhCLEtBQUtTLFVBQVVRLFVBQVksV0FDWmYsS0FDTkMsWUFBWVcsUUFHckJkLEtBQUtTLFVBQVVTLFVBQVksV0FDWmhCLEtBQ05DLFlBQVlZLFFBRXJCZixLQUFLUyxVQUFVVSxvQkFBc0IsV0FDakMsSUFBSWxCLEVBQU9DLEtBQ1BrQixFQUFZaEIsRUFBRSxlQUNkaUIsRUFBWWpCLEVBQUUsZUFDZGtCLEVBQVdsQixFQUFFLGNBRWpCZ0IsRUFBVUcsTUFBTSxXQUNadEIsRUFBS2dCLFlBQ0xoQixFQUFLSSxjQUFjbUIsSUFBSSxDQUFDQyxLQUFRLE1BRXBDSixFQUFVRSxNQUFNLFdBQ1p0QixFQUFLZ0IsWUFDTGhCLEVBQUtJLGNBQWNtQixJQUFJLENBQUNDLE1BQVMsUUFFckNILEVBQVNDLE1BQU0sV0FDWHRCLEVBQUtpQixlQUtibEIsS0FBS1MsVUFBVWlCLGtCQUFvQixXQUMvQixJQUFJekIsRUFBT0MsS0FDSUUsRUFB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ZUFNaENoRCxLQUFLUyxVQUFVTyxJQUFNLFdBQ2pCLElBQUlmLEVBQU9DLEtBQ1hELEVBQUtrQixzQkFDTGxCLEVBQUt5QixvQkFDTHpCLEVBQUs2QixvQkFDTDdCLEVBQUtnRCx3QkFDTGhELEVBQUtnRSx3QkFDTGhFLEVBQUttRSxxQkFHVGhFLEVBQUUsWUFDYSxJQUFJSixNQUNWZ0IiLCJmaWxlIjoiZnJvbnRfYmFzZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyDnlKjkuo7lpITnkIblr7zoiKrmnaFcclxuZnVuY3Rpb24gRnJvbnRCYXNlKCkge1xyXG5cclxufVxyXG5cclxuRnJvbnRCYXNlLnByb3RvdHlwZS5saXN0ZW5BdXRoQm94SG92ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYXV0aEJveCA9ICQoXCIuYXV0aC1ib3hcIik7XHJcbiAgICB2YXIgdXNlck1vcmVCb3ggPSAkKFwiLnVzZXItbW9yZS1ib3hcIik7XHJcbiAgICBhdXRoQm94LmhvdmVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB1c2VyTW9yZUJveC5zaG93KCk7XHJcbiAgICB9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdXNlck1vcmVCb3guaGlkZSgpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5Gcm9udEJhc2UucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubGlzdGVuQXV0aEJveEhvdmVyKCk7XHJcblxyXG59O1xyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZnJvbnRCYXNlID0gbmV3IEZyb250QmFzZSgpO1xyXG4gICAgZnJvbnRCYXNlLnJ1bigpO1xyXG59KTtcclxuXHJcblxyXG4vLyDnlKjkuo7lpITnkIbnmbvlvZXms6jlhoxcclxuZnVuY3Rpb24gQXV0aCgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubWFza1dyYXBwZXIgPSAkKFwiLm1hc2std3JhcHBlclwiKTtcclxuICAgIHNlbGYuc2Nyb2xsV3JhcHBlciA9ICQoXCIuc2Nyb2xsLXdyYXBwZXJcIik7XHJcbiAgICBzZWxmLnNpZ25pbkdyb3VwID0gJChcIi5zaWduaW4tZ3JvdXBcIik7XHJcbiAgICBzZWxmLnNpZ251cEdyb3VwID0gJChcIi5zaWdudXAtZ3JvdXBcIik7XHJcbiAgICBzZWxmLnNtc0NhcHRjaGEgPSAkKFwiLnNtcy1jYXB0Y2hhLWJ0blwiKTtcclxufTtcclxuXHJcbkF1dGgucHJvdG90eXBlLnNob3dFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubWFza1dyYXBwZXIuc2hvdygpO1xyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUuaGlkZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5tYXNrV3JhcHBlci5oaWRlKCk7XHJcbn07XHJcbkF1dGgucHJvdG90eXBlLmxpc3RlblNob3dIaWRlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgc2lnbmluQnRuID0gJChcIi5zaWduaW4tYnRuXCIpO1xyXG4gICAgdmFyIHNpZ251cEJ0biA9ICQoXCIuc2lnbnVwLWJ0blwiKTtcclxuICAgIHZhciBjbG9zZUJ0biA9ICQoXCIuY2xvc2UtYnRuXCIpO1xyXG5cclxuICAgIHNpZ25pbkJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zaG93RXZlbnQoKTtcclxuICAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuY3NzKHtcImxlZnRcIjogMH0pO1xyXG4gICAgfSk7XHJcbiAgICBzaWdudXBCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuc2hvd0V2ZW50KCk7XHJcbiAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmNzcyh7XCJsZWZ0XCI6IC00MDB9KTtcclxuICAgIH0pO1xyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuaGlkZUV2ZW50KCk7XHJcbiAgICB9KTtcclxuXHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5Td2l0Y2hFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBzd2l0Y2hlciA9ICQoXCIuc3dpdGNoXCIpO1xyXG4gICAgc3dpdGNoZXIuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjdXJyZW50TGVmdCA9IHNlbGYuc2Nyb2xsV3JhcHBlci5jc3MoXCJsZWZ0XCIpO1xyXG4gICAgICAgIGN1cnJlbnRMZWZ0ID0gcGFyc2VJbnQoY3VycmVudExlZnQpO1xyXG4gICAgICAgIGlmIChjdXJyZW50TGVmdCA8IDApIHtcclxuICAgICAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmFuaW1hdGUoe1wibGVmdFwiOiBcIjBcIn0sIDUwMCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmFuaW1hdGUoe1wibGVmdFwiOiBcIi00MDBweFwifSwgNTAwKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlblNpZ25pbkV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgLy8gdmFyIHNpZ25pbkdyb3VwID0gJChcIi5zaWduaW4tZ3JvdXBcIik7XHJcbiAgICB2YXIgdGVsZXBob25lSW5wdXQgPSBzZWxmLnNpZ25pbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSd0ZWxlcGhvbmUnXVwiKTtcclxuICAgIHZhciBwYXNzd29yZElucHV0ID0gc2VsZi5zaWduaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQnXVwiKTtcclxuICAgIHZhciByZW1lbWJlcklucHV0ID0gc2VsZi5zaWduaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncmVtZW1iZXInXVwiKTtcclxuXHJcbiAgICB2YXIgc3VibWl0QnRuID0gc2VsZi5zaWduaW5Hcm91cC5maW5kKFwiLnN1Ym1pdC1idG5cIik7XHJcbiAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0ZWxlcGhvbmUgPSB0ZWxlcGhvbmVJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgcGFzc3dvcmQgPSBwYXNzd29yZElucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciByZW1lbWJlciA9IHJlbWVtYmVySW5wdXQucHJvcChcImNoZWNrZWRcIik7XHJcblxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgIFwidXJsXCI6IFwiL2FjY291bnQvbG9naW4vXCIsXHJcbiAgICAgICAgICAgIFwiZGF0YVwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInRlbGVwaG9uZVwiOiB0ZWxlcGhvbmUsXHJcbiAgICAgICAgICAgICAgICBcInBhc3N3b3JkXCI6IHBhc3N3b3JkLFxyXG4gICAgICAgICAgICAgICAgXCJyZW1lbWJlclwiOiByZW1lbWJlciA/IDEgOiAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwic3VjY2Vzc1wiOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmhpZGVFdmVudCgpO1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgKHJlc3VsdFtcImNvZGVcIl0gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIHNlbGYuaGlkZUV2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgLy8gfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICB2YXIgbWVzc2FnZU9iamVjdCA9IHJlc3VsdFtcIm1lc3NhZ2VcIl07XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgaWYgKHR5cGVvZiBtZXNzYWdlT2JqZWN0ID09IFwic3RyaW5nXCIgfHwgbWVzc2FnZU9iamVjdC5jb25zdHJ1Y3RvciA9PT0gU3RyaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3cobWVzc2FnZU9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgZm9yICh2YXIga2V5IGluIG1lc3NhZ2VPYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHZhciBtZXNzYWdlcyA9IG1lc3NhZ2VPYmplY3Rba2V5XTtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gbWVzc2FnZXNbMF07XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93KG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlbkltZ0NhcHRjaGFFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBpbWdDYXB0Y2hhID0gJChcIi5pbWdfY2FwdGNoYVwiKTtcclxuICAgIGltZ0NhcHRjaGEuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGltZ0NhcHRjaGEuYXR0cihcInNyY1wiLCBcIi9hY2NvdW50L2ltZ19jYXB0Y2hhL1wiICsgXCI/cmFuZG9tPVwiICsgTWF0aC5yYW5kb20oKSlcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUuc21zU3VjY2Vzc0V2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgbWVzc2FnZUJveC5zaG93U3VjY2VzcyhcIuefreS/oemqjOivgeeggeWPkemAgeaIkOWKn35cIik7XHJcbiAgICBzZWxmLnNtc0NhcHRjaGEuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKTtcclxuICAgIHZhciBjb3VudCA9IDYwO1xyXG4gICAgc2VsZi5zbXNDYXB0Y2hhLnVuYmluZChcImNsaWNrXCIpO1xyXG4gICAgdmFyIHRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuc21zQ2FwdGNoYS50ZXh0KGNvdW50ICsgXCJzXCIpO1xyXG4gICAgICAgIGNvdW50LS07XHJcbiAgICAgICAgaWYgKGNvdW50IDw9IDApIHtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7XHJcbiAgICAgICAgICAgIHNlbGYuc21zQ2FwdGNoYS5yZW1vdmVDbGFzcyhcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICBzZWxmLnNtc0NhcHRjaGEudGV4dChcIuWPkemAgemqjOivgeeggVwiKTtcclxuICAgICAgICAgICAgc2VsZi5saXN0ZW5TbXNDYXB0Y2hhRXZlbnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9LCAxMDAwKTtcclxufTtcclxuXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlblNtc0NhcHRjaGFFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciB0ZWxlcGhvbmVJbnB1dCA9IHNlbGYuc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3RlbGVwaG9uZSddXCIpO1xyXG4gICAgc2VsZi5zbXNDYXB0Y2hhLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdGVsZXBob25lID0gdGVsZXBob25lSW5wdXQudmFsKCk7XHJcbiAgICAgICAgaWYgKCF0ZWxlcGhvbmUpIHtcclxuICAgICAgICAgICAgbWVzc2FnZUJveC5zaG93SW5mbyhcIuivt+i+k+WFpeaJi+acuuWPt+eggX5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHhmemFqYXguZ2V0KHtcclxuICAgICAgICAgICAgXCJ1cmxcIjogXCIvYWNjb3VudC9zbXNfY2FwdGNoYS9cIixcclxuICAgICAgICAgICAgXCJkYXRhXCI6IHtcclxuICAgICAgICAgICAgICAgIFwidGVsZXBob25lXCI6IHRlbGVwaG9uZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcInN1Y2Nlc3NcIjogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFtcImNvZGVcIl0gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc21zU3VjY2Vzc0V2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxuXHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TaWdudXBFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgc3VibWl0QnRuID0gc2VsZi5zaWdudXBHcm91cC5maW5kKFwiLnN1Ym1pdC1idG5cIik7XHJcbiAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgdGVsZXBob25lSW5wdXQgPSBzZWxmLnNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSd0ZWxlcGhvbmUnXVwiKTtcclxuICAgICAgICB2YXIgdXNlcm5hbWVJbnB1dCA9IHNlbGYuc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3VzZXJuYW1lJ11cIik7XHJcbiAgICAgICAgdmFyIGltZ0NhcHRjaGFJbnB1dCA9IHNlbGYuc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J2ltZ19jYXB0Y2hhJ11cIik7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkMUlucHV0ID0gc2VsZi5zaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQxJ11cIik7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkMklucHV0ID0gc2VsZi5zaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQyJ11cIik7XHJcbiAgICAgICAgdmFyIHNtc0NhcHRjaGFJbnB1dCA9IHNlbGYuc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Ntc19jYXB0Y2hhJ11cIik7XHJcblxyXG4gICAgICAgIHZhciB0ZWxlcGhvbmUgPSB0ZWxlcGhvbmVJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgdXNlcm5hbWUgPSB1c2VybmFtZUlucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBpbWdfY2FwdGNoYSA9IGltZ0NhcHRjaGFJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgcGFzc3dvcmQxID0gcGFzc3dvcmQxSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkMiA9IHBhc3N3b3JkMklucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBzbXNfY2FwdGNoYSA9IHNtc0NhcHRjaGFJbnB1dC52YWwoKTtcclxuXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgXCJ1cmxcIjogXCIvYWNjb3VudC9yZWdpc3Rlci9cIixcclxuICAgICAgICAgICAgXCJkYXRhXCI6IHtcclxuICAgICAgICAgICAgICAgIFwidGVsZXBob25lXCI6IHRlbGVwaG9uZSxcclxuICAgICAgICAgICAgICAgIFwidXNlcm5hbWVcIjogdXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICBcImltZ19jYXB0Y2hhXCI6IGltZ19jYXB0Y2hhLFxyXG4gICAgICAgICAgICAgICAgXCJwYXNzd29yZDFcIjogcGFzc3dvcmQxLFxyXG4gICAgICAgICAgICAgICAgXCJwYXNzd29yZDJcIjogcGFzc3dvcmQyLFxyXG4gICAgICAgICAgICAgICAgXCJzbXNfY2FwdGNoYVwiOiBzbXNfY2FwdGNoYVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcInN1Y2Nlc3NcIjogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkF1dGgucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubGlzdGVuU2hvd0hpZGVFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5Td2l0Y2hFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5TaWduaW5FdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5JbWdDYXB0Y2hhRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuU21zQ2FwdGNoYUV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblNpZ251cEV2ZW50KCk7XHJcbn07XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBhdXRoID0gbmV3IEF1dGgoKTtcclxuICAgIGF1dGgucnVuKCk7XHJcbn0pOyJdfQ==
