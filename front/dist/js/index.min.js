function Banner(){this.index=1,this.bannerWidth=798,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUl=$("#banner-ul"),this.liList=this.bannerUl.children("li"),this.bannerCount=this.liList.length,this.bannerGroup=$("#banner-group"),this.pageControl=$(".page-control")}function Index(){this.page=2,template.defaults.imports.timeSince=function(n){var e=new Date(n),t=e.getTime(),i=((new Date).getTime()-t)/1e3;return i<60?"刚刚":60<=i&&i<3600?(minutes=parseInt(i/60),minutes+"分钟前"):3600<=i&&i<86400?(hours=parseInt(i/60/60),hours+"小时前"):86400<=i&&i<2592e3?(days=parseInt(i/60/60/24),days+"天前"):e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDay()+" "+e.getHours()+":"+e.getMinutes()}}Banner.prototype.initBanner=function(){var n=this,e=n.liList.eq(0).clone(),t=n.liList.eq(n.bannerCount-1).clone();n.bannerUl.append(e),n.bannerUl.prepend(t),n.bannerUl.css({width:n.bannerWidth*(n.bannerCount+2),left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=this,e=0;e<n.bannerCount;e++){var t=$("<li></li>");n.pageControl.append(t),0===e&&t.addClass("active")}n.pageControl.css({width:28*n.bannerCount})},Banner.prototype.animate=function(){var n=this;n.bannerUl.animate({left:-798*n.index},750);var e=n.index;e=0===e?n.bannerCount-1:e===n.bannerCount+1?0:n.index-1,n.pageControl.children("li").eq(e).addClass("active").siblings().removeClass("active")},Banner.prototype.toggleArrow=function(n){n?(this.leftArrow.show(),this.rightArrow.show()):(this.leftArrow.hide(),this.rightArrow.hide())},Banner.prototype.loop=function(){var n=this;$("#banner-ul");this.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUl.css({left:-n.bannerCount*n.bannerWidth}),n.index=n.bannerCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.listenPageControl=function(){var t=this;t.pageControl.children("li").each(function(n,e){$(e).click(function(){t.index=n,t.animate()})})},Banner.prototype.run=function(){this.initBanner(),this.initPageControl(),this.loop(),this.listenArrowClick(),this.listenBannerHover(),this.listenPageControl()},Index.prototype.listenLoadMoreEvent=function(){var i=this,r=$("#load-more-btn");r.click(function(){xfzajax.get({url:"/news/news_list/",data:{p:i.page},success:function(n){if(200===n.code){var e=n.data;if(0<e.length){var t=template("news-item",{newses:e});$(".list-inner-group").append(t),i.page+=1}else r.hide()}}})})},Index.prototype.run=function(){this.listenLoadMoreEvent()},$(function(){(new Banner).run(),(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJpbmRleCIsImJhbm5lcldpZHRoIiwibGVmdEFycm93IiwiJCIsInJpZ2h0QXJyb3ciLCJiYW5uZXJVbCIsImxpTGlzdCIsImNoaWxkcmVuIiwiYmFubmVyQ291bnQiLCJsZW5ndGgiLCJiYW5uZXJHcm91cCIsInBhZ2VDb250cm9sIiwiSW5kZXgiLCJwYWdlIiwidGVtcGxhdGUiLCJkZWZhdWx0cyIsImltcG9ydHMiLCJ0aW1lU2luY2UiLCJkYXRlVmFsdWUiLCJkYXRlIiwiRGF0ZSIsImRhdGV0cyIsImdldFRpbWUiLCJ0aW1lc3RhbXAiLCJtaW51dGVzIiwicGFyc2VJbnQiLCJob3VycyIsImRheXMiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiZ2V0RGF5IiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwicHJvdG90eXBlIiwiaW5pdEJhbm5lciIsInNlbGYiLCJmaXJzdEJhbm5lciIsImVxIiwiY2xvbmUiLCJsYXN0QmFubmVyIiwiYXBwZW5kIiwicHJlcGVuZCIsImNzcyIsIndpZHRoIiwibGVmdCIsImluaXRQYWdlQ29udHJvbCIsImkiLCJjaXJjbGUiLCJhZGRDbGFzcyIsImFuaW1hdGUiLCJzaWJsaW5ncyIsInJlbW92ZUNsYXNzIiwidG9nZ2xlQXJyb3ciLCJpc1Nob3ciLCJzaG93IiwiaGlkZSIsImxvb3AiLCJ0aW1lciIsInNldEludGVydmFsIiwibGlzdGVuQXJyb3dDbGljayIsImNsaWNrIiwibGlzdGVuQmFubmVySG92ZXIiLCJob3ZlciIsImNsZWFySW50ZXJ2YWwiLCJsaXN0ZW5QYWdlQ29udHJvbCIsImVhY2giLCJvYmoiLCJydW4iLCJsaXN0ZW5Mb2FkTW9yZUV2ZW50IiwibG9hZEJ0biIsInhmemFqYXgiLCJnZXQiLCJ1cmwiLCJkYXRhIiwicCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJuZXdzZXMiLCJ0cGwiXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLFNBQ0xDLEtB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QUFRLENBQ0pDLEVBQUt2QyxFQUFLdEIsTUFFZDhELFFBQVcsU0FBVUMsR0FDakIsR0FBdUIsTUFBbkJBLEVBQWEsS0FBVyxDQUN4QixJQUFJQyxFQUFTRCxFQUFhLEtBQzFCLEdBQW9CLEVBQWhCQyxFQUFPcEUsT0FBWSxDQUNuQixJQUFJcUUsRUFBTWhFLFNBQVMsWUFBYSxDQUFDK0QsT0FBVUEsSUFDbEMxRSxFQUFFLHFCQUNScUMsT0FBT3NDLEdBQ1YzQyxFQUFLdEIsTUFBUSxPQUVid0QsRUFBUWQsY0FRaEMzQyxNQUFNcUIsVUFBVWtDLElBQU0sV0FDUHBFLEtBQ05xRSx1QkFHVGpFLEVBQUUsWUFDZSxJQUFJTCxRQUNWcUUsT0FFSyxJQUFJdkQsT0FDVnVEIiwiZmlsZSI6ImluZGV4Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIEJhbm5lcigpIHtcclxuICAgIHRoaXMuaW5kZXggPSAxO1xyXG4gICAgdGhpcy5iYW5uZXJXaWR0aCA9IDc5ODtcclxuICAgIHRoaXMubGVmdEFycm93ID0gJChcIi5sZWZ0LWFycm93XCIpO1xyXG4gICAgdGhpcy5yaWdodEFycm93ID0gJChcIi5yaWdodC1hcnJvd1wiKTtcclxuICAgIHRoaXMuYmFubmVyVWwgPSAkKFwiI2Jhbm5lci11bFwiKTtcclxuICAgIHRoaXMubGlMaXN0ID0gdGhpcy5iYW5uZXJVbC5jaGlsZHJlbihcImxpXCIpO1xyXG4gICAgdGhpcy5iYW5uZXJDb3VudCA9IHRoaXMubGlMaXN0Lmxlbmd0aDtcclxuICAgIHRoaXMuYmFubmVyR3JvdXAgPSAkKFwiI2Jhbm5lci1ncm91cFwiKTtcclxuICAgIHRoaXMucGFnZUNvbnRyb2wgPSAkKFwiLnBhZ2UtY29udHJvbFwiKTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUuaW5pdEJhbm5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBmaXJzdEJhbm5lciA9IHNlbGYubGlMaXN0LmVxKDApLmNsb25lKCk7XHJcbiAgICB2YXIgbGFzdEJhbm5lciA9IHNlbGYubGlMaXN0LmVxKHNlbGYuYmFubmVyQ291bnQgLSAxKS5jbG9uZSgpO1xyXG4gICAgc2VsZi5iYW5uZXJVbC5hcHBlbmQoZmlyc3RCYW5uZXIpO1xyXG4gICAgc2VsZi5iYW5uZXJVbC5wcmVwZW5kKGxhc3RCYW5uZXIpO1xyXG4gICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wid2lkdGhcIjogc2VsZi5iYW5uZXJXaWR0aCAqIChzZWxmLmJhbm5lckNvdW50ICsgMiksIFwibGVmdFwiOiAtc2VsZi5iYW5uZXJXaWR0aH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5pbml0UGFnZUNvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuYmFubmVyQ291bnQ7IGkrKykge1xyXG4gICAgICAgIHZhciBjaXJjbGUgPSAkKFwiPGxpPjwvbGk+XCIpO1xyXG4gICAgICAgIHNlbGYucGFnZUNvbnRyb2wuYXBwZW5kKGNpcmNsZSk7XHJcbiAgICAgICAgaWYgKGkgPT09IDApIHtcclxuICAgICAgICAgICAgY2lyY2xlLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNlbGYucGFnZUNvbnRyb2wuY3NzKHtcIndpZHRoXCI6IHNlbGYuYmFubmVyQ291bnQgKiAyOH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5hbmltYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5iYW5uZXJVbC5hbmltYXRlKHtcImxlZnRcIjogLTc5OCAqIHNlbGYuaW5kZXh9LCA3NTApO1xyXG4gICAgdmFyIGluZGV4ID0gc2VsZi5pbmRleDtcclxuICAgIGlmIChpbmRleCA9PT0gMCkge1xyXG4gICAgICAgIGluZGV4ID0gc2VsZi5iYW5uZXJDb3VudCAtIDE7XHJcbiAgICB9IGVsc2UgaWYgKGluZGV4ID09PSBzZWxmLmJhbm5lckNvdW50ICsgMSkge1xyXG4gICAgICAgIGluZGV4ID0gMDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaW5kZXggPSBzZWxmLmluZGV4IC0gMTtcclxuICAgIH1cclxuICAgIHNlbGYucGFnZUNvbnRyb2wuY2hpbGRyZW4oXCJsaVwiKS5lcShpbmRleCkuYWRkQ2xhc3MoXCJhY3RpdmVcIikuc2libGluZ3MoKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUudG9nZ2xlQXJyb3cgPSBmdW5jdGlvbiAoaXNTaG93KSB7XHJcbiAgICBpZiAoaXNTaG93KSB7XHJcbiAgICAgICAgdGhpcy5sZWZ0QXJyb3cuc2hvdygpO1xyXG4gICAgICAgIHRoaXMucmlnaHRBcnJvdy5zaG93KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMubGVmdEFycm93LmhpZGUoKTtcclxuICAgICAgICB0aGlzLnJpZ2h0QXJyb3cuaGlkZSgpO1xyXG4gICAgfVxyXG4gICAgO1xyXG59O1xyXG5cclxuXHJcbkJhbm5lci5wcm90b3R5cGUubG9vcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBiYW5uZXJVbCA9ICQoXCIjYmFubmVyLXVsXCIpO1xyXG4gICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoc2VsZi5pbmRleCA+PSBzZWxmLmJhbm5lckNvdW50ICsgMSkge1xyXG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmNzcyh7XCJsZWZ0XCI6IC1zZWxmLmJhbm5lcldpZHRofSk7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSAyO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXgrK1xyXG4gICAgICAgIH1cclxuICAgICAgICA7XHJcbiAgICAgICAgc2VsZi5hbmltYXRlKCk7XHJcbiAgICB9LCAyMDAwKTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuQXJyb3dDbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubGVmdEFycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoc2VsZi5pbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmNzcyh7XCJsZWZ0XCI6IC1zZWxmLmJhbm5lckNvdW50ICogc2VsZi5iYW5uZXJXaWR0aH0pXHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBzZWxmLmJhbm5lckNvdW50IC0gMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4LS07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xyXG4gICAgfSk7XHJcbiAgICBzZWxmLnJpZ2h0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChzZWxmLmluZGV4ID09PSBzZWxmLmJhbm5lckNvdW50ICsgMSkge1xyXG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmNzcyh7XCJsZWZ0XCI6IC1zZWxmLmJhbm5lcldpZHRofSk7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSAyO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXgrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5hbmltYXRlKCk7XHJcbiAgICB9KVxyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5CYW5uZXJIb3ZlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHRoaXMuYmFubmVyR3JvdXAuaG92ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIOm8oOagh+i/m+WFpeS6i+S7tlxyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoc2VsZi50aW1lcik7XHJcbiAgICAgICAgc2VsZi50b2dnbGVBcnJvdyh0cnVlKTtcclxuICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyDpvKDmoIfnprvlvIDkuovku7ZcclxuICAgICAgICBzZWxmLmxvb3AoKTtcclxuICAgICAgICBzZWxmLnRvZ2dsZUFycm93KGZhbHNlKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5QYWdlQ29udHJvbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYucGFnZUNvbnRyb2wuY2hpbGRyZW4oXCJsaVwiKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgb2JqKSB7XHJcbiAgICAgICAgJChvYmopLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5pbml0QmFubmVyKCk7XHJcbiAgICB0aGlzLmluaXRQYWdlQ29udHJvbCgpO1xyXG4gICAgdGhpcy5sb29wKCk7XHJcbiAgICB0aGlzLmxpc3RlbkFycm93Q2xpY2soKTtcclxuICAgIHRoaXMubGlzdGVuQmFubmVySG92ZXIoKTtcclxuICAgIHRoaXMubGlzdGVuUGFnZUNvbnRyb2woKTtcclxuXHJcbn07XHJcblxyXG5mdW5jdGlvbiBJbmRleCgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYucGFnZSA9IDI7XHJcblxyXG4gICAgdGVtcGxhdGUuZGVmYXVsdHMuaW1wb3J0cy50aW1lU2luY2UgPSBmdW5jdGlvbiAoZGF0ZVZhbHVlKSB7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShkYXRlVmFsdWUpO1xyXG4gICAgICAgIHZhciBkYXRldHMgPSBkYXRlLmdldFRpbWUoKTtcclxuICAgICAgICB2YXIgbm93dHMgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xyXG4gICAgICAgIHZhciB0aW1lc3RhbXAgPSAobm93dHMgLSBkYXRldHMpIC8gMTAwMDtcclxuICAgICAgICBpZiAodGltZXN0YW1wIDwgNjApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwi5Yia5YiaXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aW1lc3RhbXAgPj0gNjAgJiYgdGltZXN0YW1wIDwgNjAgKiA2MCkge1xyXG4gICAgICAgICAgICBtaW51dGVzID0gcGFyc2VJbnQodGltZXN0YW1wIC8gNjApO1xyXG4gICAgICAgICAgICByZXR1cm4gbWludXRlcyArIFwi5YiG6ZKf5YmNXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aW1lc3RhbXAgPj0gNjAgKiA2MCAmJiB0aW1lc3RhbXAgPCA2MCAqIDYwICogMjQpIHtcclxuICAgICAgICAgICAgaG91cnMgPSBwYXJzZUludCh0aW1lc3RhbXAgLyA2MCAvIDYwKTtcclxuICAgICAgICAgICAgcmV0dXJuIGhvdXJzICsgXCLlsI/ml7bliY1cIjtcclxuICAgICAgICB9IGVsc2UgaWYgKHRpbWVzdGFtcCA+PSA2MCAqIDYwICogMjQgJiYgdGltZXN0YW1wIDwgNjAgKiA2MCAqIDI0ICogMzApIHtcclxuICAgICAgICAgICAgZGF5cyA9IHBhcnNlSW50KHRpbWVzdGFtcCAvIDYwIC8gNjAgLyAyNCk7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXlzICsgXCLlpKnliY1cIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgdmFyIG1vbnRoID0gZGF0ZS5nZXRNb250aCgpICsgMTtcclxuICAgICAgICAgICAgdmFyIGRheSA9IGRhdGUuZ2V0RGF5KCk7XHJcbiAgICAgICAgICAgIHZhciBob3VyID0gZGF0ZS5nZXRIb3VycygpO1xyXG4gICAgICAgICAgICB2YXIgbWludXRlID0gZGF0ZS5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB5ZWFyICsgXCIvXCIgKyBtb250aCArIFwiL1wiICsgZGF5ICsgXCIgXCIgKyBob3VyICsgXCI6XCIgKyBtaW51dGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbkluZGV4LnByb3RvdHlwZS5saXN0ZW5Mb2FkTW9yZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGxvYWRCdG4gPSAkKFwiI2xvYWQtbW9yZS1idG5cIik7XHJcbiAgICBsb2FkQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgICAgIFwidXJsXCI6IFwiL25ld3MvbmV3c19saXN0L1wiLFxyXG4gICAgICAgICAgICBcImRhdGFcIjoge1xyXG4gICAgICAgICAgICAgICAgXCJwXCI6IHNlbGYucGFnZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcInN1Y2Nlc3NcIjogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFtcImNvZGVcIl0gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzZXMgPSByZXN1bHRbXCJkYXRhXCJdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdzZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoXCJuZXdzLWl0ZW1cIiwge1wibmV3c2VzXCI6IG5ld3Nlc30pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdWwgPSAkKFwiLmxpc3QtaW5uZXItZ3JvdXBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVsLmFwcGVuZCh0cGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkQnRuLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufTtcclxuXHJcbkluZGV4LnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxpc3RlbkxvYWRNb3JlRXZlbnQoKTtcclxufTtcclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGJhbm5lciA9IG5ldyBCYW5uZXIoKTtcclxuICAgIGJhbm5lci5ydW4oKTtcclxuXHJcbiAgICB2YXIgaW5kZXggPSBuZXcgSW5kZXgoKTtcclxuICAgIGluZGV4LnJ1bigpO1xyXG59KTsiXX0=
