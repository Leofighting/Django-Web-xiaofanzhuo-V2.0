function Banner(){this.index=1,this.bannerWidth=798,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUl=$("#banner-ul"),this.liList=this.bannerUl.children("li"),this.bannerCount=this.liList.length,this.bannerGroup=$("#banner-group"),this.pageControl=$(".page-control")}function Index(){var n=this;n.page=2,n.category_id=0,n.loadBtn=$("#load-more-btn")}Banner.prototype.initBanner=function(){var n=this,t=n.liList.eq(0).clone(),e=n.liList.eq(n.bannerCount-1).clone();n.bannerUl.append(t),n.bannerUl.prepend(e),n.bannerUl.css({width:n.bannerWidth*(n.bannerCount+2),left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=this,t=0;t<n.bannerCount;t++){var e=$("<li></li>");n.pageControl.append(e),0===t&&e.addClass("active")}n.pageControl.css({width:28*n.bannerCount})},Banner.prototype.animate=function(){var n=this;n.bannerUl.animate({left:-798*n.index},750);var t=n.index;t=0===t?n.bannerCount-1:t===n.bannerCount+1?0:n.index-1,n.pageControl.children("li").eq(t).addClass("active").siblings().removeClass("active")},Banner.prototype.toggleArrow=function(n){n?(this.leftArrow.show(),this.rightArrow.show()):(this.leftArrow.hide(),this.rightArrow.hide())},Banner.prototype.loop=function(){var n=this;$("#banner-ul");this.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUl.css({left:-n.bannerCount*n.bannerWidth}),n.index=n.bannerCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.listenPageControl=function(){var e=this;e.pageControl.children("li").each(function(n,t){$(t).click(function(){e.index=n,e.animate()})})},Banner.prototype.run=function(){this.initBanner(),this.initPageControl(),this.loop(),this.listenArrowClick(),this.listenBannerHover(),this.listenPageControl()},Index.prototype.listenLoadMoreEvent=function(){var i=this;i.loadBtn.click(function(){xfzajax.get({url:"/news/news_list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200===n.code){var t=n.data;if(0<t.length){var e=template("news-item",{newses:t});$(".list-inner-group").append(e),i.page+=1}else i.loadBtn.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var o=this;$(".list-tab").children().click(function(){var r=$(this),a=r.attr("data-category");xfzajax.get({url:"/news/news_list/",data:{category_id:a,p:1},success:function(n){if(200===n.code){var t=n.data,e=template("news-item",{newses:t}),i=$(".list-inner-group");i.empty(),i.append(e),o.page=2,o.category_id=a,r.addClass("active").siblings().removeClass("active"),o.loadBtn.show()}}})})},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){(new Banner).run(),(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJpbmRleCIsImJhbm5lcldpZHRoIiwibGVmdEFycm93IiwiJCIsInJpZ2h0QXJyb3ciLCJiYW5uZXJVbCIsImxpTGlzdCIsImNoaWxkcmVuIiwiYmFubmVyQ291bnQiLCJsZW5ndGgiLCJiYW5uZXJHcm91cCIsInBhZ2VDb250cm9sIiwiSW5kZXgiLCJzZWxmIiwicGFnZSIsImNhdGVnb3J5X2lkIiwibG9hZEJ0biIsInByb3RvdHlwZSIsImluaXRCYW5uZXIiLCJmaXJzdEJhbm5lciIsImVxIiwiY2xvbmUiLCJsYXN0QmFubmVyIiwiYXBwZW5kIiwicHJlcGVuZCIsImNzcyIsIndpZHRoIiwibGVmdCIsImluaXRQYWdlQ29udHJvbCIsImkiLCJjaXJjbGUiLCJhZGRDbGFzcyIsImFuaW1hdGUiLCJzaWJsaW5ncyIsInJlbW92ZUNsYXNzIiwidG9nZ2xlQXJyb3ciLCJpc1Nob3ciLCJzaG93IiwiaGlkZSIsImxvb3AiLCJ0aW1lciIsInNldEludGVydmFsIiwibGlzdGVuQXJyb3dDbGljayIsImNsaWNrIiwibGlzdGVuQmFubmVySG92ZXIiLCJob3ZlciIsImNsZWFySW50ZXJ2YWwiLCJsaXN0ZW5QYWdlQ29udHJvbCIsImVhY2giLCJvYmoiLCJydW4iLCJsaXN0ZW5Mb2FkTW9yZUV2ZW50IiwieGZ6YWpheCIsImdldCIsInVybCIsImRhdGEiLCJwIiwic3VjY2VzcyIsInJlc3VsdCIsIm5ld3NlcyIsInRwbCIsInRlbXBsYXRlIiwibGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCIsImxpIiwiYXR0ciIsIm5ld3NMaXN0R3JvdXAiLCJlbXB0eSJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsU0FDTEMsS0FBS0MsTUFBUSxFQUNiRCxLQUFLRSxZQUFjLElBQ25CRixLQUFLRyxVQUFZQyxFQUFFLGVBQ25CSixLQUFLSyxXQUFhRCxFQUFFLGdCQUNwQkosS0FBS00sU0FBV0YsRUFBRSxjQUNsQkos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QUFFLHFCQUN0QjhELEVBQWNDLFFBQ2RELEVBQWMxQyxPQUFPcUMsR0FDckIvQyxFQUFLQyxLQUFPLEVBQ1pELEVBQUtFLFlBQWNBLEVBQ25CZ0QsRUFBR2hDLFNBQVMsVUFBVUUsV0FBV0MsWUFBWSxVQUM3Q3JCLEVBQUtHLFFBQVFxQixjQVNqQ3pCLE1BQU1LLFVBQVVpQyxJQUFNLFdBQ1BuRCxLQUNOb0Qsc0JBRE1wRCxLQUVOK0QsNkJBR1QzRCxFQUFFLFlBQ2UsSUFBSUwsUUFDVm9ELE9BRUssSUFBSXRDLE9BQ1ZzQyIsImZpbGUiOiJpbmRleC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBCYW5uZXIoKSB7XHJcbiAgICB0aGlzLmluZGV4ID0gMTtcclxuICAgIHRoaXMuYmFubmVyV2lkdGggPSA3OTg7XHJcbiAgICB0aGlzLmxlZnRBcnJvdyA9ICQoXCIubGVmdC1hcnJvd1wiKTtcclxuICAgIHRoaXMucmlnaHRBcnJvdyA9ICQoXCIucmlnaHQtYXJyb3dcIik7XHJcbiAgICB0aGlzLmJhbm5lclVsID0gJChcIiNiYW5uZXItdWxcIik7XHJcbiAgICB0aGlzLmxpTGlzdCA9IHRoaXMuYmFubmVyVWwuY2hpbGRyZW4oXCJsaVwiKTtcclxuICAgIHRoaXMuYmFubmVyQ291bnQgPSB0aGlzLmxpTGlzdC5sZW5ndGg7XHJcbiAgICB0aGlzLmJhbm5lckdyb3VwID0gJChcIiNiYW5uZXItZ3JvdXBcIik7XHJcbiAgICB0aGlzLnBhZ2VDb250cm9sID0gJChcIi5wYWdlLWNvbnRyb2xcIik7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmluaXRCYW5uZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgZmlyc3RCYW5uZXIgPSBzZWxmLmxpTGlzdC5lcSgwKS5jbG9uZSgpO1xyXG4gICAgdmFyIGxhc3RCYW5uZXIgPSBzZWxmLmxpTGlzdC5lcShzZWxmLmJhbm5lckNvdW50IC0gMSkuY2xvbmUoKTtcclxuICAgIHNlbGYuYmFubmVyVWwuYXBwZW5kKGZpcnN0QmFubmVyKTtcclxuICAgIHNlbGYuYmFubmVyVWwucHJlcGVuZChsYXN0QmFubmVyKTtcclxuICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcIndpZHRoXCI6IHNlbGYuYmFubmVyV2lkdGggKiAoc2VsZi5iYW5uZXJDb3VudCArIDIpLCBcImxlZnRcIjogLXNlbGYuYmFubmVyV2lkdGh9KTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUuaW5pdFBhZ2VDb250cm9sID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLmJhbm5lckNvdW50OyBpKyspIHtcclxuICAgICAgICB2YXIgY2lyY2xlID0gJChcIjxsaT48L2xpPlwiKTtcclxuICAgICAgICBzZWxmLnBhZ2VDb250cm9sLmFwcGVuZChjaXJjbGUpO1xyXG4gICAgICAgIGlmIChpID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNpcmNsZS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNzcyh7XCJ3aWR0aFwiOiBzZWxmLmJhbm5lckNvdW50ICogMjh9KTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuYmFubmVyVWwuYW5pbWF0ZSh7XCJsZWZ0XCI6IC03OTggKiBzZWxmLmluZGV4fSwgNzUwKTtcclxuICAgIHZhciBpbmRleCA9IHNlbGYuaW5kZXg7XHJcbiAgICBpZiAoaW5kZXggPT09IDApIHtcclxuICAgICAgICBpbmRleCA9IHNlbGYuYmFubmVyQ291bnQgLSAxO1xyXG4gICAgfSBlbHNlIGlmIChpbmRleCA9PT0gc2VsZi5iYW5uZXJDb3VudCArIDEpIHtcclxuICAgICAgICBpbmRleCA9IDA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGluZGV4ID0gc2VsZi5pbmRleCAtIDE7XHJcbiAgICB9XHJcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNoaWxkcmVuKFwibGlcIikuZXEoaW5kZXgpLmFkZENsYXNzKFwiYWN0aXZlXCIpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLnRvZ2dsZUFycm93ID0gZnVuY3Rpb24gKGlzU2hvdykge1xyXG4gICAgaWYgKGlzU2hvdykge1xyXG4gICAgICAgIHRoaXMubGVmdEFycm93LnNob3coKTtcclxuICAgICAgICB0aGlzLnJpZ2h0QXJyb3cuc2hvdygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmxlZnRBcnJvdy5oaWRlKCk7XHJcbiAgICAgICAgdGhpcy5yaWdodEFycm93LmhpZGUoKTtcclxuICAgIH1cclxuICAgIDtcclxufTtcclxuXHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxvb3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgYmFubmVyVWwgPSAkKFwiI2Jhbm5lci11bFwiKTtcclxuICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuaW5kZXggPj0gc2VsZi5iYW5uZXJDb3VudCArIDEpIHtcclxuICAgICAgICAgICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wibGVmdFwiOiAtc2VsZi5iYW5uZXJXaWR0aH0pO1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gMjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4KytcclxuICAgICAgICB9XHJcbiAgICAgICAgO1xyXG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xyXG4gICAgfSwgMjAwMCk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlbkFycm93Q2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxlZnRBcnJvdy5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuaW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wibGVmdFwiOiAtc2VsZi5iYW5uZXJDb3VudCAqIHNlbGYuYmFubmVyV2lkdGh9KVxyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gc2VsZi5iYW5uZXJDb3VudCAtIDE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5pbmRleC0tO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0pO1xyXG4gICAgc2VsZi5yaWdodEFycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoc2VsZi5pbmRleCA9PT0gc2VsZi5iYW5uZXJDb3VudCArIDEpIHtcclxuICAgICAgICAgICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wibGVmdFwiOiAtc2VsZi5iYW5uZXJXaWR0aH0pO1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gMjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xyXG4gICAgfSlcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuQmFubmVySG92ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB0aGlzLmJhbm5lckdyb3VwLmhvdmVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyDpvKDmoIfov5vlhaXkuovku7ZcclxuICAgICAgICBjbGVhckludGVydmFsKHNlbGYudGltZXIpO1xyXG4gICAgICAgIHNlbGYudG9nZ2xlQXJyb3codHJ1ZSk7XHJcbiAgICB9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8g6byg5qCH56a75byA5LqL5Lu2XHJcbiAgICAgICAgc2VsZi5sb29wKCk7XHJcbiAgICAgICAgc2VsZi50b2dnbGVBcnJvdyhmYWxzZSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuUGFnZUNvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNoaWxkcmVuKFwibGlcIikuZWFjaChmdW5jdGlvbiAoaW5kZXgsIG9iaikge1xyXG4gICAgICAgICQob2JqKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBpbmRleDtcclxuICAgICAgICAgICAgc2VsZi5hbmltYXRlKCk7XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuaW5pdEJhbm5lcigpO1xyXG4gICAgdGhpcy5pbml0UGFnZUNvbnRyb2woKTtcclxuICAgIHRoaXMubG9vcCgpO1xyXG4gICAgdGhpcy5saXN0ZW5BcnJvd0NsaWNrKCk7XHJcbiAgICB0aGlzLmxpc3RlbkJhbm5lckhvdmVyKCk7XHJcbiAgICB0aGlzLmxpc3RlblBhZ2VDb250cm9sKCk7XHJcblxyXG59O1xyXG5cclxuZnVuY3Rpb24gSW5kZXgoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLnBhZ2UgPSAyO1xyXG4gICAgc2VsZi5jYXRlZ29yeV9pZCA9IDA7XHJcbiAgICBzZWxmLmxvYWRCdG4gPSAkKFwiI2xvYWQtbW9yZS1idG5cIik7XHJcbn1cclxuXHJcbkluZGV4LnByb3RvdHlwZS5saXN0ZW5Mb2FkTW9yZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5sb2FkQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgICAgIFwidXJsXCI6IFwiL25ld3MvbmV3c19saXN0L1wiLFxyXG4gICAgICAgICAgICBcImRhdGFcIjoge1xyXG4gICAgICAgICAgICAgICAgXCJwXCI6IHNlbGYucGFnZSxcclxuICAgICAgICAgICAgICAgIFwiY2F0ZWdvcnlfaWRcIjogc2VsZi5jYXRlZ29yeV9pZFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcInN1Y2Nlc3NcIjogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFtcImNvZGVcIl0gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzZXMgPSByZXN1bHRbXCJkYXRhXCJdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdzZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoXCJuZXdzLWl0ZW1cIiwge1wibmV3c2VzXCI6IG5ld3Nlc30pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdWwgPSAkKFwiLmxpc3QtaW5uZXItZ3JvdXBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVsLmFwcGVuZCh0cGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRCdG4uaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59O1xyXG5cclxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgdGFiR3JvdXAgPSAkKFwiLmxpc3QtdGFiXCIpO1xyXG4gICAgdGFiR3JvdXAuY2hpbGRyZW4oKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGxpID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgY2F0ZWdvcnlfaWQgPSBsaS5hdHRyKFwiZGF0YS1jYXRlZ29yeVwiKTtcclxuICAgICAgICB2YXIgcGFnZSA9IDE7XHJcbiAgICAgICAgeGZ6YWpheC5nZXQoe1xyXG4gICAgICAgICAgICBcInVybFwiOiBcIi9uZXdzL25ld3NfbGlzdC9cIixcclxuICAgICAgICAgICAgXCJkYXRhXCI6IHtcclxuICAgICAgICAgICAgICAgIFwiY2F0ZWdvcnlfaWRcIjogY2F0ZWdvcnlfaWQsXHJcbiAgICAgICAgICAgICAgICBcInBcIjogcGFnZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcInN1Y2Nlc3NcIjogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFtcImNvZGVcIl0gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzZXMgPSByZXN1bHRbXCJkYXRhXCJdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcIm5ld3MtaXRlbVwiLCB7XCJuZXdzZXNcIjogbmV3c2VzfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NMaXN0R3JvdXAgPSAkKFwiLmxpc3QtaW5uZXItZ3JvdXBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3c0xpc3RHcm91cC5lbXB0eSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld3NMaXN0R3JvdXAuYXBwZW5kKHRwbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYWdlID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNhdGVnb3J5X2lkID0gY2F0ZWdvcnlfaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbGkuYWRkQ2xhc3MoXCJhY3RpdmVcIikuc2libGluZ3MoKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRCdG4uc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgfSlcclxufTtcclxuXHJcbkluZGV4LnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxpc3RlbkxvYWRNb3JlRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCgpXHJcbn07XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBiYW5uZXIgPSBuZXcgQmFubmVyKCk7XHJcbiAgICBiYW5uZXIucnVuKCk7XHJcblxyXG4gICAgdmFyIGluZGV4ID0gbmV3IEluZGV4KCk7XHJcbiAgICBpbmRleC5ydW4oKTtcclxufSk7Il19
